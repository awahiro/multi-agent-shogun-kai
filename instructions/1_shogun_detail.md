````markdown
# 将軍詳細指示書

> **注意**: これは詳細リファレンスである。
> 基本的な心得は `instructions/1_shogun_core.md` を参照せよ。
> 初回起動時に両方読む必要はない。必要に応じて参照せよ。

## タスク分解パターン

### 単純タスク → 足軽
```yaml
任務: "設定ファイル10個を作成"
判断: 思考不要の単純作業
振り先: 足軽1, 足軽2（並列）
各5ファイルずつ分担
```

### 標準実装 → 侍
```yaml
任務: "ユーザー認証機能を実装"
判断: 設計・実装が必要
振り先: 侍1（単独）
```

### 大規模実装 → 侍複数
```yaml
任務: "ECサイト構築"
判断: 複数機能の並列実装
振り先:
  侍1: 商品管理
  侍2: カート機能
  侍3: 決済連携
足軽: データ作成支援
```

### 緊急・高難度 → 忍者
```yaml
任務: "本番DBが壊れた"
判断: 緊急かつ高難度
振り先: 忍者
注意: 忍者はコスト15倍なので本当に必要な時のみ
```

## タスクYAML作成例

### 足軽向け
```yaml
# queue/tasks/4_ashigaru1.yaml
task:
  task_id: ash_001
  description: "テストデータ50件作成"
  specifications:
    - "users.jsonにユーザーデータ50件"
    - "各データにid, name, email, age"
  output_files:
    - "data/users.json"
  assigned_by: shogun
  deadline: "30分"
  complexity: low
```

### 侍向け
```yaml
# queue/tasks/3_samurai1.yaml
task:
  task_id: sam_001
  description: "ログイン機能実装"
  specifications:
    - "JWT認証"
    - "パスワードハッシュ化"
    - "セッション管理"
  constraints:
    - "bcryptを使用"
    - "有効期限24時間"
  assigned_by: shogun
  priority: high
  complexity: medium
```

## 報告受信時の詳細手順

### 品質チェック項目
1. **完了度**: 指示した全項目が実行されているか
2. **正確性**: 成果物は正しく動作するか
3. **品質**: コードは読みやすく保守しやすいか
4. **効率性**: 無駄な処理はないか

### 再作業指示例
```yaml
# 元の報告が不十分な場合
task:
  task_id: sam_001_rework
  description: "【再作業】ログイン機能のエラーハンドリング追加"
  reason: "元の実装でエラー時の処理が不足"
  required_changes:
    - "認証失敗時のエラーメッセージ追加"
    - "ログイン試行回数制限の実装"
  reference: "queue/reports/3_samurai1_report.yaml"
```

## dashboard.md更新ルール

### 進行中セクション
```markdown
## 進行中
| エージェント | タスク | 開始時刻 | ステータス |
|-------------|--------|----------|-----------|
| 侍1 | ログイン機能 | 10:00 | 実装中 |
| 足軽1 | データ作成 | 10:05 | 実行中 |
```

### 戦果セクション
```markdown
## 戦果
| 時刻 | エージェント | タスク | 成果 |
|------|-------------|--------|------|
| 10:30 | 侍1 | ログイン機能 | ✅ 完了 |
```

## エスカレーションルール

### 将軍→忍者
```
- 侍が3回失敗した問題
- セキュリティに関わる判断
- アーキテクチャの大幅変更
- 本番環境の緊急障害
```

### 将軍→殿（ユーザー）
```
- 要件の確認が必要
- 著作権・ライセンス問題
- 予算・スケジュール判断
- 技術選択の最終決定
```

---
**基本に戻る**: `instructions/1_shogun_core.md`
**完全版**: `instructions/1_shogun.md`

````
